### 虚拟 DOM

#### 概念：

由于 DOM 就是一棵树，可以用 js将其描绘出来，所以本质上虚拟 DOM 就是 JavaScript 对象；



#### 产生背景

在进行 DOM 更新的时候，DOM 的操作是非常消耗资源的，里面很多的属性是没有用处的，所以需要用一个非常轻量级的 JS 对象来代替复杂的 DOM 节点，然后把对 DOM 的 DIff 操作转移到 JS 对象，就可以避免大量的对 DOM 的操作，这个轻量级的JS 对象就是**虚拟 DOM**

#### virtual DOM 实现原理

实现原理的核心是 diff 算法

##### Diff 算法

diff 算法大概步骤：

* 用 JavaScript 对象结构表示 DOM 树结构， 然后用这个构建树创建一个真正的 DOM 树，插入到文档中
* 当状态变更的时候，重新构建一个新的对象树，然后用新的树 和旧的树相互比较，记录两棵树的差异

> 1 在新旧树做对比的时候， 两个树完全的 diff 算法是时间复杂度 O(n3),相当耗费时间， 所以在 js 中真实的 DOM 算法会对同一个层级的元素做对比；这样的算法时间复杂度是 O(n)。减少对比，提高效率
>
> 2 在对比过程中，采取的是深度优先的原则，即先完全遍历整棵树后，对比完成后在转移位置；每遍历到一个节点就把该节点和新的树进行对比，有差异就记录在一个对象里面

* 在把所记录的差异应有到所构建的真正的 DOM 树上， 试图就更新了；

核心点在第二个； 对比差异；

diff 算法的实现过程：

主要看两个核心点：

* patch(container,Vnode): 初次渲染的时候，将 VDOM 渲染成真正的 DOM 插入到容器里；
* patch(vnode, newNode) : 再次渲染的时候，将新的vnode 和旧的 vnode 相互对比，然后将之间的差异应用到构建的真正的 DOM 上； 

#### 优点、缺点



#### 作用



#### React Virtual   VS  Vue virtual



#### 额外相关知识点

